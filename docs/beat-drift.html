<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ROMY Ring‑Laser Monitor - Beat Drift</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="style.css" />
  <script src="js/navigation.js"></script>
</head>
<body>
  <section class="hero is-primary is-small hero-banner">
    <div class="hero-body">
      <div class="container has-text-centered">
        <h1 class="title is-1 has-text-white">
          ROMY Ring‑Laser Monitor
        </h1>
        <p class="subtitle is-4 has-text-white">Beat Drift</p>
      </div>
    </div>
  </section>

  <!-- Navigation placeholder -->
  <div id="navigation-placeholder"></div>

  <section class="section">
    <div class="container">
      <h2 class="title is-3 has-text-primary">
        <i class="fas fa-heartbeat mr-2"></i>Beat Frequency Drift Analysis
      </h2>
      <div class="columns">
        <div class="column is-12">
          <div class="card">
            <div class="card-header">
              <p class="card-header-title">
                <i class="fas fa-signal mr-2"></i>Beat Frequency Stability
              </p>
            </div>
            <div class="card-content">
              <figure class="image">
                <img class="lb" data-src="./figures/new/html_beatdrift.png"
                     alt="Beat Drift Analysis"
                     title="Click to view full size" />
              </figure>
              <div class="content mt-3 is-size-7 has-text-grey">
                <p><strong>Top Four Panels:</strong> The top four panels show the past 14 days of Sagnac frequency time series for the horizontal ring (~555.5 Hz), the northern ring (~302.5 Hz), the western ring (~447.6 Hz) and the eastern ring (~447.5 Hz). Drifts introduced by environmental influences (e.g. temperature and pressure) are visible. Ideally, geodetic signals (e.g. solid earth tides, Chandler wobble) are present in the time series, but currently covered by the dominating drifts.</p>
                <p><strong>MLTIs (Red Regions):</strong> Launched MLTIs to recover from a split-mode state are logged and shown as vertical red areas. Logged maintenance work is shown as vertical yellow areas.</p>
                <p><strong>Bottom Panel:</strong> The lowermost panel shows the MLTI density for all operated rings. This is based on the logged MLTIs that are convolved with a 24 hour boxcar window. This is a proxy of the operational health of each gyroscope and its settings.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Lightbox overlay -->
  <div id="overlay">
    <img id="overlayImg" alt="" />
  </div>

  <script>
    // Cache buster for images
    function addCacheBuster() {
      const images = document.querySelectorAll('img[data-src]');
      const timestamp = new Date().getTime();
      images.forEach(img => {
        const originalSrc = img.getAttribute('data-src');
        img.src = originalSrc + '?t=' + timestamp;
      });
    }

    // Lightbox functionality
    function setupLightbox() {
      const overlay = document.getElementById('overlay');
      const overlayImg = document.getElementById('overlayImg');
      
      document.querySelectorAll('.lb').forEach(img => {
        img.addEventListener('click', () => {
          overlayImg.src = img.src;
          overlay.classList.add('show');
        });
      });
      
      overlay.addEventListener('click', () => {
        overlay.classList.remove('show');
      });
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      addCacheBuster();
      setupLightbox();
      
      // Auto-refresh every 5 minutes
      setInterval(addCacheBuster, 300000);
    });
  </script>
</body>
</html>
