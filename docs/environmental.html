<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ROMY Ring‑Laser Monitor - Environmental</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="style.css" />
  <script src="js/navigation.js"></script>
</head>
<body>
  <section class="hero is-primary is-small hero-banner">
    <div class="hero-body">
      <div class="container has-text-centered">
        <h1 class="title is-1 has-text-white">
          ROMY Ring‑Laser Monitor
        </h1>
        <p class="subtitle is-4 has-text-white">Environmental</p>
      </div>
    </div>
  </section>

  <!-- Navigation placeholder -->
  <div id="navigation-placeholder"></div>

  <section class="section">
    <div class="container">
      <h2 class="title is-3 has-text-primary">
        <i class="fas fa-temperature-high mr-2"></i>Environmental Monitoring
      </h2>
      <div class="columns">
        <div class="column is-12">
          <div class="card">
            <div class="card-header">
              <p class="card-header-title">
                <i class="fas fa-thermometer-half mr-2"></i>Environmental Parameters
              </p>
            </div>
            <div class="card-content">
              <figure class="image">
                <img class="lb" data-src="./figures/new/html_environmentals.png"
                     alt="Environmental Monitoring"
                     title="Click to view full size" />
              </figure>
              <div class="content mt-3 is-size-7 has-text-grey">
                <p><strong>Summary:</strong> This plot serves as a summary of the critical environmental data for the horizontal ring. The time series panels (top to bottom) provide context for interpreting laser performance, stability, and drift sources over the previous day.</p>
                <ul>
                  <li><strong>1. Sagnac Beat Frequency:</strong> Unfiltered (grey), cleaned (black) and backscatter‑corrected (red) time series.</li>
                  <li><strong>2. Temperatures:</strong> Corner shaft sensors PS5, PS7, PS9 plus central bottom (dark green, ~15 m depth, seasonally stable) and central upper shaft (light green, uninsulated, showing diurnal variation).</li>
                  <li><strong>3. Hydrology & Precipitation:</strong> Near‑surface aquifer water level (main building, ~150 m from ROMY) and precipitation (moving mean + cumulative) from the local station.</li>
                  <li><strong>4. Tiltmeter:</strong> Southern shaft tilt as 20 s averaged values, reduced by the first sample (relative change indicator).</li>
                  <li><strong>5. Barometric Pressure & Infrasound:</strong> MB2005 absolute pressure (dark red) and high‑pass filtered infrasound channel (light red) showing rapid pressure fluctuations.</li>
                  <li><strong>6. Relative Beam Position:</strong> Horizontal ring beam position in y and x (each reduced by first sample) indicating alignment and slow cavity geometry changes.</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Lightbox overlay -->
  <div id="overlay">
    <img id="overlayImg" alt="" />
  </div>

  <script>
    // Cache buster for images
    function addCacheBuster() {
      const images = document.querySelectorAll('img[data-src]');
      const timestamp = new Date().getTime();
      images.forEach(img => {
        const originalSrc = img.getAttribute('data-src');
        img.src = originalSrc + '?t=' + timestamp;
      });
    }

    // Lightbox functionality
    function setupLightbox() {
      const overlay = document.getElementById('overlay');
      const overlayImg = document.getElementById('overlayImg');
      
      document.querySelectorAll('.lb').forEach(img => {
        img.addEventListener('click', () => {
          overlayImg.src = img.src;
          overlay.classList.add('show');
        });
      });
      
      overlay.addEventListener('click', () => {
        overlay.classList.remove('show');
      });
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      addCacheBuster();
      setupLightbox();
      
      // Auto-refresh every 5 minutes
      setInterval(addCacheBuster, 300000);
    });
  </script>
</body>
</html>
